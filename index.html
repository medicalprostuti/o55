<!DOCTYPE html>
<html lang="bn">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ছাত্র ড্যাশবোর্ড</title>
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Hind+Siliguri:wght@300;400;500;600;700&display=swap">
    <style>
        /* Base styles - keep as is for responsiveness */
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Hind Siliguri', sans-serif;
            background-color: #f0f2f5;
            color: #1b0b54;
            padding: 4vw;
            min-height: 100vh;
        }

        .container {
            max-width: 90vw;
            margin: 0 auto;
            background: white;
            padding: 4vw;
            border-radius: 2vw;
            box-shadow: 0 0 2vw rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease-in-out;
        }

        h1,
        h3,
        h4,
        p,
        span,
        input,
        button {
            font-family: 'Hind Siliguri', sans-serif;
        }

        h1 {
            text-align: center;
            color: #1b0b54;
            font-size: 6vw;
            margin-bottom: 4vw;
            transition: color 0.3s ease-in-out;
        }

        h3 {
            font-size: 5vw;
            margin: 4vw 0 2vw;
            color: #1b0b54;
            transition: color 0.3s ease-in-out;
        }

        h4 {
            font-size: 4.5vw;
            color: #1b0b54;
            transition: color 0.3s ease-in-out;
        }

        p,
        span {
            font-size: 4vw;
            color: #1b0b54;
            transition: color 0.3s ease-in-out;
        }

        .input-section {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 2vw;
            flex-wrap: nowrap;
            margin-bottom: 4vw;
        }

        input[type="text"] {
            padding: 2vw;
            font-size: 4vw;
            width: 45vw;
            border: 0.5vw solid #1b0b54;
            border-radius: 1vw;
            transition: all 0.3s ease-in-out;
        }

        input[type="text"]:focus {
            outline: none;
            border-color: #3a2b7f;
            box-shadow: 0 0 1.5vw rgba(58, 43, 127, 0.3);
        }

        button {
            padding: 2vw 4vw;
            background: #1b0b54;
            color: white;
            border: none;
            border-radius: 1vw;
            cursor: pointer;
            font-size: 4vw;
            transition: background 0.3s ease-in-out, transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
        }

        button:hover {
            background: #3a2b7f;
            transform: translateY(-0.2vw);
            box-shadow: 0 0.5vw 1vw rgba(0, 0, 0, 0.2);
        }

        button:active {
            transform: translateY(0);
            box-shadow: none;
        }


        /* Performance section initial state for animation */
        #performance {
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.6s ease-out, transform 0.6s ease-out;
            display: none;
            /* Keep display none initially to hide content */
        }

        /* Performance section animated state */
        #performance.show-performance {
            opacity: 1;
            transform: translateY(0);
            display: block;
            /* Change display to block when animated */
        }


        .progress-circle {
            position: relative;
            width: 30vw;
            height: 30vw;
            margin: 4vw auto;
        }

        .small-progress-circle {
            position: relative;
            width: 16vw;
            height: 16vw;
            margin: 2vw;
        }

        .progress-circle svg,
        .small-progress-circle svg {
            transform: rotate(-90deg);
            width: 100%;
            height: 100%;
        }

        .progress-circle circle,
        .small-progress-circle circle {
            fill: none;
            stroke-width: 8%;
            transform-origin: center;
            transform: scale(1);
        }

        .small-progress-circle circle {
            stroke-width: 9.375%;
        }

        .progress-circle .bg,
        .small-progress-circle .bg {
            stroke: #e0e0e0;
        }

        .progress-circle .progress,
        .small-progress-circle .progress {
            stroke: #1b0b54;
            transition: stroke-dashoffset 1s ease-in-out;
        }


        .progress-circle span,
        .small-progress-circle span {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 5vw;
            font-weight: 600;
            color: #1b0b54;
        }

        .small-progress-circle span {
            font-size: 3vw;
        }

        .progress-bar {
            background: #e0e0e0;
            border-radius: 1vw;
            height: 4vw;
            margin: 2vw 0;
            overflow: hidden;
        }

        .progress-bar-fill {
            background: #1b0b54;
            height: 100%;
            width: 0;
            transition: width 1s ease-in-out;
        }

        .exam-type-container {
            display: flex;
            flex-direction: column;
            gap: 4vw;
            margin: 2vw 0;
        }

        .exam-type-row {
            display: flex;
            justify-content: center;
            gap: 4vw;
            flex-wrap: nowrap;
        }

        .exam-type-item {
            text-align: center;
            width: 25vw;
            transition: transform 0.2s ease-in-out;
        }

        .exam-type-item:hover {
            transform: translateY(-0.5vw);
        }

        .exam-type-item p {
            font-weight: 700;
            margin: 1vw 0;
            font-size: 3vw;
        }

        .chart-button {
            text-align: center;
            margin: 4vw 0;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            overflow-y: auto;
            opacity: 0;
            transition: opacity 0.3s ease-in-out;
        }

        .modal.show {
            opacity: 1;
        }

        .modal-content {
            background: white;
            margin: 5vw auto;
            padding: 4vw;
            border-radius: 2vw;
            max-width: 90vw;
            position: relative;
            overflow-y: auto;
            max-height: 90vh;
            transform: translateY(-20px);
            transition: transform 0.3s ease-in-out, opacity 0.3s ease-in-out;
        }

        .modal.show .modal-content {
            transform: translateY(0);
        }

        .modal-content::-webkit-scrollbar {
            width: 2vw;
        }

        .modal-content::-webkit-scrollbar-track {
            background: #f0f2f5;
            border-radius: 1vw;
        }

        .modal-content::-webkit-scrollbar-thumb {
            background: #1b0b54;
            border-radius: 1vw;
        }

        .modal-content::-webkit-scrollbar-thumb:hover {
            background: #3a2b7f;
        }

        .modal-content {
            scrollbar-width: thin;
            scrollbar-color: #1b0b54 #f0f2f5;
        }

        .close {
            position: absolute;
            top: 2vw;
            right: 2vw;
            font-size: 6vw;
            color: #1b0b54;
            cursor: pointer;
            transition: transform 0.2s ease-in-out, color 0.2s ease-in-out;
        }

        .close:hover {
            transform: rotate(90deg);
            color: #3a2b7f;
        }

        .exam-list h4 {
            font-size: 4.5vw;
            margin: 2vw 0;
        }

        .exam-list p {
            font-size: 4vw;
            margin: 2vw 0;
            padding-left: 1vw;
            border-left: 0.5vw solid #e0e0e0;
            transition: border-color 0.3s ease-in-out;
        }

        .exam-list p:hover {
            border-left-color: #1b0b54;
        }

        .advisory-section {
            margin-top: 4vw;
        }

        .advisory {
            background: #1b0b54;
            color: white;
            padding: 3vw;
            border-radius: 2vw;
            text-align: center;
            font-weight: 700;
            font-size: 4vw;
            transition: background 0.3s ease-in-out, transform 0.3s ease-in-out, box-shadow 0.3s ease-in-out;
        }

        .advisory:hover {
            background: #3a2b7f;
            transform: scale(1.02);
            box-shadow: 0 1vw 2vw rgba(0, 0, 0, 0.2);
        }

        .subject-item {
            margin-bottom: 4vw;
            transition: all 0.3s ease-in-out;
        }

        .subject-item p {
            margin-bottom: 3vw;
        }

        .subject-item:hover {
            transform: scale(1.01);
            box-shadow: 0 0.5vw 1vw rgba(0, 0, 0, 0.05);
        }


        /* Media Queries - keep as is for responsiveness */
        @media (max-width: 768px) {
            h1 {
                font-size: 8vw;
            }

            h3 {
                font-size: 6vw;
            }

            h4 {
                font-size: 5.5vw;
            }

            p,
            span {
                font-size: 5vw;
            }

            .input-section {
                gap: 2vw;
            }

            input[type="text"] {
                width: 55vw;
                font-size: 5vw;
                padding: 2.5vw;
            }

            button {
                font-size: 5vw;
                padding: 2.5vw 5vw;
            }

            .progress-circle {
                width: 40vw;
                height: 40vw;
            }

            .progress-circle span {
                font-size: 6vw;
            }

            .small-progress-circle {
                width: 16vw;
                height: 16vw;
            }

            .small-progress-circle span {
                font-size: 3.5vw;
            }

            .exam-type-item {
                width: 28vw;
            }

            .exam-type-item p {
                font-size: 3.5vw;
            }

            .progress-bar {
                height: 5vw;
            }

            .subject-item p {
                margin-bottom: 4vw;
            }
        }

        @media (max-width: 480px) {
            .container {
                padding: 5vw;
            }

            .input-section {
                gap: 1.5vw;
            }

            input[type="text"] {
                width: 50vw;
                font-size: 4.5vw;
                padding: 2vw;
            }

            button {
                font-size: 4.5vw;
                padding: 2vw 4vw;
            }

            .exam-type-row {
                gap: 2vw;
            }

            .exam-type-item {
                width: 30vw;
            }

            .small-progress-circle {
                width: 15vw;
                height: 15vw;
            }

            .small-progress-circle span {
                font-size: 3vw;
            }

            .exam-type-item p {
                font-size: 3vw;
            }

            .subject-item p {
                margin-bottom: 3.5vw;
            }
        }

        @media (max-width: 320px) {
            input[type="text"] {
                width: 48vw;
                font-size: 4vw;
            }

            button {
                font-size: 4vw;
                padding: 2vw 3.5vw;
            }

            .exam-type-item {
                width: 32vw;
            }

            .small-progress-circle {
                width: 14vw;
                height: 14vw;
            }

            .small-progress-circle span {
                font-size: 2.8vw;
            }

            .exam-type-item p {
                font-size: 2.8vw;
            }

            .modal-content::-webkit-scrollbar {
                width: 1.5vw;
            }

            .subject-item p {
                margin-bottom: 3vw;
            }
        }
    </style>
</head>

<body>
    <div class="container">
        <h1 id="mainHeading">স্টুডেন্ট ড্যাশবোর্ড</h1>
        <div class="input-section">
            <input type="text" id="rollInput" placeholder="রোল নম্বর লিখুন">
            <button onclick="showPerformance()">জমা দিন</button>
        </div>
        <div id="performance">
            <h3>ওভার অল পারফরম্যান্স</h3>
            <div class="progress-circle" id="overallProgress">
                <svg viewBox="0 0 100 100">
                    <circle class="bg" cx="50" cy="50" r="45" />
                    <circle class="progress" id="progressRing" cx="50" cy="50" r="45" />
                </svg>
                <span id="percentage">0%</span>
            </div>
            <div id="subjects">
                <h3>বিষয়ভিত্তিক পারফরম্যান্স</h3>
            </div>
            <h3>পরীক্ষার ধরণ অনুযায়ী পারফরম্যান্স</h3>
            <div class="exam-type-container">
                <div class="exam-type-row">
                    <div class="exam-type-item">
                        <p>দৈনিক</p>
                        <div class="small-progress-circle">
                            <svg viewBox="0 0 100 100">
                                <circle class="bg" cx="50" cy="50" r="45" />
                                <circle class="progress" id="dailyProgress" cx="50" cy="50" r="45" />
                            </svg>
                            <span id="dailyPercentage">0%</span>
                        </div>
                    </div>
                    <div class="exam-type-item">
                        <p>সাপ্তাহিক</p>
                        <div class="small-progress-circle">
                            <svg viewBox="0 0 100 100">
                                <circle class="bg" cx="50" cy="50" r="45" />
                                <circle class="progress" id="weeklyProgress" cx="50" cy="50" r="45" />
                            </svg>
                            <span id="weeklyPercentage">0%</span>
                        </div>
                    </div>
                    <div class="exam-type-item">
                        <p>মাসিক</p>
                        <div class="small-progress-circle">
                            <svg viewBox="0 0 100 100">
                                <circle class="bg" cx="50" cy="50" r="45" />
                                <circle class="progress" id="monthlyProgress" cx="50" cy="50" r="45" />
                            </svg>
                            <span id="monthlyPercentage">0%</span>
                        </div>
                    </div>
                </div>
                <div class="exam-type-row">
                    <div class="exam-type-item">
                        <p>পেপার ফাইনাল</p>
                        <div class="small-progress-circle">
                            <svg viewBox="0 0 100 100">
                                <circle class="bg" cx="50" cy="50" r="45" />
                                <circle class="progress" id="paperFinalProgress" cx="50" cy="50" r="45" />
                            </svg>
                            <span id="paperFinalPercentage">0%</span>
                        </div>
                    </div>
                    <div class="exam-type-item">
                        <p>বিষয় ফাইনাল</p>
                        <div class="small-progress-circle">
                            <svg viewBox="0 0 100 100">
                                <circle class="bg" cx="50" cy="50" r="45" />
                                <circle class="progress" id="subjectFinalProgress" cx="50" cy="50" r="45" />
                            </svg>
                            <span id="subjectFinalPercentage">0%</span>
                        </div>
                    </div>
                    <div class="exam-type-item">
                        <p>টেস্ট পেপার</p>
                        <div class="small-progress-circle">
                            <svg viewBox="0 0 100 100">
                                <circle class="bg" cx="50" cy="50" r="45" />
                                <circle class="progress" id="testPaperProgress" cx="50" cy="50" r="45" />
                            </svg>
                            <span id="testPaperPercentage">0%</span>
                        </div>
                    </div>
                </div>
            </div>
            <div>
                <h3>পরীক্ষায় উপস্থিতি</h3>
                <div class="progress-bar">
                    <div class="progress-bar-fill" id="attendanceBar"></div>
                </div>
                <p id="attendanceText">0/0 পরীক্ষায় উপস্থিত</p>
            </div>
            <div class="chart-button">
                <button onclick="openModal()">পরীক্ষার বিবরণ দেখুন</button>
            </div>
            <div class="advisory-section">
                <h3>উপদেশ</h3>
                <div class="advisory" id="advisory"></div>
            </div>
        </div>
        <div id="examModal" class="modal">
            <div class="modal-content">
                <span class="close" onclick="closeModal()">×</span>
                <div class="exam-list" id="examList"></div>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const rollToName = {
                "123456": "আলী আকবর",
                "123682": "রহিম খান",
                "672567": "সুমাইয়া রহমান"
            };

            const examData = [
                {
                    date: "23.4.2025",
                    type: "Daily",
                    subject: "বাংলা",
                    totalMarks: 50,
                    students: {
                        "123456": 35,
                        "123682": 32,
                        "672567": 46
                    }
                },
                {
                    date: "24.4.2025",
                    type: "Daily",
                    subject: "ইংরেজি",
                    totalMarks: 50,
                    students: {
                        "123456": 15,
                        "123682": 12,
                        "672567": 26
                    }
                },
                {
                    date: "25.4.2025",
                    type: "Weekly",
                    weeklyNumber: "প্রথম উইকলি",
                    totalMarks: 50,
                    students: {
                        "123456": 40,
                        "123682": 38,
                        "672567": 42
                    }
                },
                {
                    date: "30.4.2025",
                    type: "Monthly",
                    monthlyNumber: "১ম মাস",
                    totalMarks: 50,
                    students: {
                        "123456": 45,
                        "123682": 40,
                        "672567": 48
                    }
                },
                {
                    date: "1.5.2025",
                    type: "Paper Final",
                    subject: "বাংলা",
                    totalMarks: 100,
                    students: {
                        "123456": 80,
                        "123682": 75,
                        "672567": 90
                    }
                },
                {
                    date: "2.5.2025",
                    type: "Subject Final",
                    subjectNumber: "প্রথম সাবজেক্ট",
                    totalMarks: 100,
                    students: {
                        "123456": 70,
                        "123682": 65,
                        "672567": 85
                    }
                },
                {
                    date: "3.5.2025",
                    type: "Test Paper",
                    testNumber: "প্রথম টেস্ট",
                    totalMarks: 50,
                    students: {
                        "123456": 45,
                        "123682": 40,
                        "672567": 48
                    }
                },
                {
                    date: "4.5.2025",
                    type: "Daily",
                    subject: "বিজ্ঞান",
                    totalMarks: 50,
                    students: {
                        "123456": 42,
                        "123682": 38,
                        "672567": 45
                    }
                },
                {
                    date: "5.5.2025",
                    type: "Weekly",
                    weeklyNumber: "২য় উইকলি",
                    totalMarks: 50,
                    students: {
                        "123456": 38,
                        "123682": 35,
                        "672567": 44
                    }
                },
                {
                    date: "6.5.2025",
                    type: "Subject Final",
                    subjectNumber: "দ্বিতীয় সাবজেক্ট",
                    totalMarks: 100,
                    students: {
                        "123456": 82,
                        "123682": 78,
                        "672567": 88
                    }
                },
                {
                    date: "7.5.2025",
                    type: "Test Paper",
                    testNumber: "দ্বিতীয় টেস্ট",
                    totalMarks: 50,
                    students: {
                        "123456": 44,
                        "123682": 41,
                        "672567": 47
                    }
                }
            ];

            // Helper function to update a progress circle
            function updateProgressCircle(circleElement, percentageElement, percentage, radius) {
                const circumference = 2 * Math.PI * radius;
                circleElement.style.strokeDasharray = circumference;
                circleElement.style.strokeDashoffset = circumference - (percentage / 100) * circumference;
                percentageElement.textContent = `${percentage}%`;
            }

            window.showPerformance = function () {
                const roll = document.getElementById('rollInput').value;
                if (!roll) {
                    alert('রোল নম্বর লিখুন');
                    return;
                }

                // Update heading with name from rollToName
                const displayName = rollToName[roll] || "ছাত্র";
                const mainHeading = document.getElementById('mainHeading');
                if (mainHeading) {
                    mainHeading.textContent = `${displayName}- এর রিপোর্ট কার্ড`;
                }

                // Calculate total marks for all exams in the platform
                const totalPlatformMarks = examData.reduce((sum, exam) => sum + exam.totalMarks, 0);

                // Calculate obtained marks and exam-type performance
                let obtainedMarks = 0;
                let examsAttended = 0;
                const subjects = {};
                const examTypes = {
                    Daily: { obtained: 0, total: 0 },
                    Weekly: { obtained: 0, total: 0 },
                    Monthly: { obtained: 0, total: 0 },
                    "Paper Final": { obtained: 0, total: 0 },
                    "Subject Final": { obtained: 0, total: 0 },
                    "Test Paper": { obtained: 0, total: 0 }
                };

                examData.forEach(exam => {
                    if (exam.students[roll] !== undefined) {
                        examsAttended++;
                        obtainedMarks += exam.students[roll];

                        // Aggregate marks for exam types
                        examTypes[exam.type].obtained += exam.students[roll];
                        examTypes[exam.type].total += exam.totalMarks;

                        // Aggregate marks for subjects (Daily and Paper Final exams only)
                        if (["Daily", "Paper Final"].includes(exam.type)) {
                            if (!subjects[exam.subject]) {
                                subjects[exam.subject] = { obtained: 0, total: 0 };
                            }
                            subjects[exam.subject].obtained += exam.students[roll];
                            subjects[exam.subject].total += exam.totalMarks;
                        }
                    }
                });

                // Overall performance
                const overallPercentage = totalPlatformMarks ? ((obtainedMarks / totalPlatformMarks) * 100).toFixed(2) : 0;
                const progressRing = document.getElementById('progressRing');
                const percentageElement = document.getElementById('percentage');
                updateProgressCircle(progressRing, percentageElement, overallPercentage, 45); // Radius is 45 based on SVG setup

                // Update exam type percentages
                const examTypeIds = {
                    Daily: { progress: 'dailyProgress', percentage: 'dailyPercentage' },
                    Weekly: { progress: 'weeklyProgress', percentage: 'weeklyPercentage' },
                    Monthly: { progress: 'monthlyProgress', percentage: 'monthlyPercentage' },
                    'Paper Final': { progress: 'paperFinalProgress', percentage: 'paperFinalPercentage' },
                    'Subject Final': { progress: 'subjectFinalProgress', percentage: 'subjectFinalPercentage' },
                    'Test Paper': { progress: 'testPaperProgress', percentage: 'testPaperPercentage' }
                };
                for (const [type, data] of Object.entries(examTypes)) {
                    const typePercentage = data.total ? ((data.obtained / data.total) * 100).toFixed(2) : 0;
                    const progressElement = document.getElementById(examTypeIds[type].progress);
                    const percentageElement = document.getElementById(examTypeIds[type].percentage);
                    if (progressElement && percentageElement) {
                        updateProgressCircle(progressElement, percentageElement, typePercentage, 45); // Radius is 45
                    }
                }

                // Subject-wise performance (all Daily and Paper Final exams)
                const subjectsDiv = document.getElementById('subjects');
                if (subjectsDiv) {
                    subjectsDiv.innerHTML = '<h3>বিষয়ভিত্তিক পারফরম্যান্স</h3>';
                    for (const [subject, data] of Object.entries(subjects)) {
                        const subjectPercentage = ((data.obtained / data.total) * 100).toFixed(2);
                        subjectsDiv.innerHTML += `
                            <div class="subject-item">
                                <h4>${subject}</h4>
                                <div class="progress-bar">
                                    <div class="progress-bar-fill" style="width: ${subjectPercentage}%"></div>
                                </div>
                                <p>${data.obtained}/${data.total} (${subjectPercentage}%)</p>
                            </div>
                        `;
                    }
                }

                // Attendance
                const totalExams = examData.length;
                const attendancePercentage = totalExams ? ((examsAttended / totalExams) * 100).toFixed(2) : 0;
                const attendanceBar = document.getElementById('attendanceBar');
                const attendanceText = document.getElementById('attendanceText');
                if (attendanceBar && attendanceText) {
                    attendanceBar.style.width = `${attendancePercentage}%`;
                    attendanceText.textContent = `${examsAttended}/${totalExams} পরীক্ষায় উপস্থিত`;
                }

                // Update advisory based on overall percentage
                const advisory = document.getElementById('advisory');
                if (advisory) {
                    if (overallPercentage >= 71) {
                        advisory.textContent = "খুব ভালো";
                    } else if (overallPercentage >= 51) {
                        advisory.textContent = "ভালো";
                    } else if (overallPercentage >= 21) {
                        advisory.textContent = "ঠিক আছে";
                    } else {
                        advisory.textContent = "খারাপ";
                    }
                }

                // Populate exam list for modal
                updateExamList(roll);
                const performanceDiv = document.getElementById('performance');
                if (performanceDiv) {
                    // Trigger animation
                    performanceDiv.style.display = 'block'; // Make it visible first
                    setTimeout(() => { // Add class after a short delay to allow 'display' change to register
                        performanceDiv.classList.add('show-performance');
                    }, 50);
                }
            };

            window.openModal = function () {
                const modal = document.getElementById('examModal');
                if (modal) {
                    modal.style.display = 'block';
                    // Ensure modal content is in its initial transformed state before showing
                    const modalContent = modal.querySelector('.modal-content');
                    modalContent.style.transform = 'translateY(-20px)'; // Reset for re-animation
                    modalContent.style.opacity = '0'; // Reset for re-animation

                    setTimeout(() => { // Trigger transition after a short delay
                        modal.classList.add('show');
                        modalContent.style.transform = 'translateY(0)';
                        modalContent.style.opacity = '1';
                    }, 50);
                }
            };

            window.closeModal = function () {
                const modal = document.getElementById('examModal');
                const modalContent = modal.querySelector('.modal-content');
                if (modal) {
                    modal.classList.remove('show');
                    modalContent.style.transform = 'translateY(-20px)';
                    modalContent.style.opacity = '0';
                    // Delay hiding to allow animation
                    setTimeout(() => {
                        modal.style.display = 'none';
                    }, 300);
                }
            };

            function updateExamList(roll) {
                const examList = document.getElementById('examList');
                if (!examList) return;

                const examTypes = [
                    { type: 'Daily', label: 'দৈনিক' },
                    { type: 'Weekly', label: 'সাপ্তাহিক' },
                    { type: 'Monthly', label: 'মাসিক' },
                    { type: 'Paper Final', label: 'পেপার ফাইনাল' },
                    { type: 'Subject Final', label: 'বিষয় ফাইনাল' },
                    { type: 'Test Paper', label: 'টেস্ট পেপার' }
                ];

                examList.innerHTML = '';
                examTypes.forEach(({ type, label }) => {
                    const exams = examData.filter(exam => exam.type === type && exam.students[roll] !== undefined); // Filter for attended exams of this type
                    if (exams.length > 0) {
                        examList.innerHTML += `<h4>${label}</h4>`;
                        exams.forEach(exam => {
                            const marks = exam.students[roll] !== undefined ? exam.students[roll] : 0;
                            let displayText = '';
                            if (type === 'Daily' || type === 'Paper Final') {
                                displayText = `${exam.date} - ${exam.subject} - ${marks}/${exam.totalMarks}`;
                            } else if (type === 'Weekly') {
                                displayText = `${exam.date} - ${exam.weeklyNumber} - ${marks}/${exam.totalMarks}`;
                            } else if (type === 'Monthly') {
                                displayText = `${exam.date} - ${exam.monthlyNumber} - ${marks}/${exam.totalMarks}`;
                            } else if (type === 'Subject Final') {
                                displayText = `${exam.date} - ${exam.subjectNumber} - ${marks}/${exam.totalMarks}`;
                            } else if (type === 'Test Paper') {
                                displayText = `${exam.date} - ${exam.testNumber} - ${marks}/${exam.totalMarks}`;
                            }
                            examList.innerHTML += `<p>${displayText}</p>`;
                        });
                    }
                });
            }
        });
    </script>
</body>

</html>
